"use strict";(self.webpackChunkInventory_Web=self.webpackChunkInventory_Web||[]).push([[292],{6292:(At,O,a)=>{a.r(O),a.d(O,{PipePropertyWeightModule:()=>Tt});var C=a(6814),u=a(5195),I=a(617),T=a(5940),h=a(5313),W=a(5683),A=a(5986),g=a(6223),i=a(4221),m=a(5154),U=a(2032),F=a(1303),D=a(8645),N=a(2572),P=a(7398),R=a(9773),B=a(8180),j=a(6293);const d="[Pipe Properties Weight]",y=(0,i.PH)(`${d} Get Weights`,(0,i.Ky)()),$=(0,i.PH)(`${d} Get Weights Success`,(0,i.Ky)()),S=(0,i.PH)(`${d} Get Weights Failure`,(0,i.Ky)()),_=(0,i.PH)(`${d} Create PipeProperty_Weight`,(0,i.Ky)()),L=(0,i.PH)(`${d} Create PipeProperty_Weight Success`,(0,i.Ky)()),K=(0,i.PH)(`${d} Create PipeProperty_Weight Error`,(0,i.Ky)()),v=(0,i.PH)(`${d} Update PipeProperty_Weight`,(0,i.Ky)()),Y=(0,i.PH)(`${d} Update PipeProperty_Weight Success`,(0,i.Ky)()),k=(0,i.PH)(`${d} Update PipeProperty_Weight Error`,(0,i.Ky)()),Q=(0,i.PH)(`${d} Reset Weight Notifications`),f=(0,j.H)({sortComparer:function z(e,n){return e.weightInKgPerMeter-n.weightInKgPerMeter},selectId:e=>e.pipeProperty_WeightId}),V=f.getInitialState({ids:[],entities:{},loadingWeights:!1,errorLoadingWeights:null,creatingWeight:!1,createdWeight:null,errorCreatingWeight:null,updatingWeight:!1,updatedWeight:null,errorUpdatingWeight:null,selectedWeight:null,errorLoadingSelectedWeight:null}),tt=(0,i.Lq)(V,(0,i.on)(y,e=>({...e,loadingWeights:!0,errorLoadingWeights:null})),(0,i.on)($,(e,{weights:n})=>f.addMany(n,{...e,loadingWeights:!1,errorLoadingWeights:null})),(0,i.on)(S,(e,{errorLoadingWeights:n})=>({...e,loadingWeights:!1,errorLoadingWeights:n})),(0,i.on)(_,e=>({...e,creatingWeight:!0,createdWeight:null,errorCreatingWeight:null})),(0,i.on)(L,(e,{weight:n})=>f.addOne(n,{...e,creatingWeight:!1,createdWeight:n,errorCreatingWeight:null})),(0,i.on)(K,(e,{errorCreatingWeight:n})=>({...e,creatingWeight:!1,errorCreatingWeight:n})),(0,i.on)(v,e=>({...e,updatingWeight:!0,errorUpdatingWeight:null})),(0,i.on)(Y,(e,{id:n,weight:o})=>f.updateOne({id:n,changes:o},{...e,updatingWeight:!1,updatedWeight:o,errorUpdatingWeight:null})),(0,i.on)(k,(e,{errorUpdatingWeight:n})=>({...e,updatingWeight:!1,errorUpdatingWeight:n})),(0,i.on)(Q,e=>({...e,createdWeight:null,updatedWeight:null,errorLoadingWeights:null,errorCreatingWeight:null,errorUpdatingWeight:null})));function et(e,n){return tt(e,n)}const{selectEntities:it,selectAll:nt}=f.getSelectors(),l=(0,i.ZF)("pipeProperty_Weight"),rt=((0,i.P1)(l,e=>e),(0,i.P1)(l,nt)),ot=((0,i.P1)(l,it),(0,i.P1)(l,e=>e.loadingWeights)),q=(0,i.P1)(l,e=>e.errorLoadingWeights),J=((0,i.P1)(l,e=>e.creatingWeight),(0,i.P1)(l,e=>e.createdWeight)),E=(0,i.P1)(l,e=>e.errorCreatingWeight),H=((0,i.P1)(l,e=>e.selectedWeight),(0,i.P1)(l,e=>e.errorLoadingSelectedWeight)),G=((0,i.P1)(l,e=>e.updatingWeight),(0,i.P1)(l,e=>e.updatedWeight));(0,i.P1)(l,e=>e.errorUpdatingWeight);var t=a(5879);function at(e,n){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Weight Metric (kg)"),t.qZA())}function st(e,n){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.weightInKgPerMeter)}}function ct(e,n){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Weight Imperial (pounds)"),t.qZA())}function gt(e,n){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.weightInLbsPerFoot)}}function lt(e,n){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Is Active"),t.qZA())}function ht(e,n){1&e&&(t.TgZ(0,"mat-icon",32),t._uU(1,"check"),t.qZA())}function pt(e,n){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"close"),t.qZA())}function dt(e,n){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,ht,2,0,"mat-icon",30),t.YNc(2,pt,2,0,"ng-template",null,31,t.W1O),t.qZA()),2&e){const o=n.$implicit,s=t.MAs(3);t.xp6(1),t.Q6J("ngIf",o.isActive)("ngIfElse",s)}}function mt(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1,"Edit"),t.qZA())}function ut(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",29)(1,"button",35),t.NdJ("click",function(){const c=t.CHM(o).$implicit,p=t.oxw();return t.KtG(p.selectWeight(c))}),t._UZ(2,"mat-icon",36),t.qZA()()}}function Pt(e,n){1&e&&t._UZ(0,"tr",37)}function ft(e,n){1&e&&t._UZ(0,"tr",38)}function Wt(e,n){1&e&&(t.TgZ(0,"div",39),t._UZ(1,"mat-progress-spinner",40),t.qZA())}function Ct(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Weight in metric is required. "),t.qZA())}function yt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," The value must be a non-negative number. "),t.qZA())}function _t(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Weight in imperial is required. "),t.qZA())}function vt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," The value must be a non-negative number. "),t.qZA())}function wt(e,n){if(1&e&&(t.TgZ(0,"div",41),t._uU(1),t.qZA()),2&e){const o=n.ngIf;t.xp6(1),t.hij(" ",o," ")}}function Mt(e,n){1&e&&(t.TgZ(0,"div",42),t._uU(1," Weight created successfully! "),t.qZA())}function xt(e,n){1&e&&(t.TgZ(0,"div",42),t._uU(1," Weight updated successfully! "),t.qZA())}const bt=[{path:"",component:(()=>{class e{constructor(o,s){this.store=o,this.fb=s,this.displayedColumns=["weightInKgPerMeter","weightInLbsPerFoot","isActive","actions"],this.editingWeight=null,this.destroy$=new D.x,this.weightForm=this.fb.group({weightInKgPerMeter:["",[g.kI.required,g.kI.pattern(/^\d+(\.\d{1,3})?$/)]],weightInLbsPerFoot:["",[g.kI.required,g.kI.pattern(/^\d+(\.\d{1,3})?$/)]],isActive:[!0,g.kI.required]}),this.dataSource=new h.by([]),this.errorMessage$=(0,N.a)([this.store.select(q),this.store.select(E),this.store.select(H)]).pipe((0,P.U)(([r,c,p])=>r||c||p?"An error occurred":"")),this.isWeightCreated$=this.store.select(J).pipe((0,P.U)(r=>!!r)),this.isWeightUpdated$=this.store.select(G).pipe((0,P.U)(r=>!!r))}ngOnInit(){this.loadingWeights$=this.store.select(ot),this.store.dispatch(y({searchParams:null})),this.store.pipe((0,i.Ys)(rt),(0,R.R)(this.destroy$)).subscribe(o=>this.dataSource.data=o)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.loadingWeightsSubscription&&this.loadingWeightsSubscription.unsubscribe(),this.checkAndResetNotifications()}selectWeight(o){this.editingWeight=o,this.weightForm.patchValue({weightInKgPerMeter:o.weightInKgPerMeter,weightInLbsPerFoot:o.weightInLbsPerFoot,isActive:o.isActive}),this.checkAndResetNotifications()}checkAndResetNotifications(){(0,N.a)([this.store.select(J),this.store.select(G),this.store.select(q),this.store.select(E),this.store.select(H)]).pipe((0,B.q)(1)).subscribe(([o,s,r,c,p])=>{(o||s||r||c||p)&&this.store.dispatch(Q())})}saveOrUpdateWeight(){if(this.editingWeight){const s={...this.editingWeight,...this.weightForm.value};this.store.dispatch(v({id:this.editingWeight.pipeProperty_WeightId,weight:s}))}else this.store.dispatch(_({weightCreate:this.weightForm.value}));this.resetForm()}resetForm(){this.editingWeight=null,this.weightForm.reset({weightMetric:"",weightImperial:"",isActive:!0}),this.checkAndResetNotifications()}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(i.yh),t.Y36(g.qu))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-pipe-property-weight"]],decls:58,vars:23,consts:[[1,"container-tab"],[1,"section"],["mat-table","","matSort","",1,"myTable",3,"dataSource"],["matColumnDef","weightInKgPerMeter"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","weightInLbsPerFoot"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","class","center-text",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","small-element",4,"matRowDef","matRowDefColumns"],["class","spinner",4,"ngIf"],[1,"editor-card"],[1,"weight-form",3,"formGroup"],[1,"widget-container",2,"flex-direction","column"],["appearance","fill",1,"full-width-input"],["matInput","","formControlName","weightInKgPerMeter","type","number","min","0","step","0.001"],[4,"ngIf"],["matInput","","formControlName","weightInLbsPerFoot","type","number","min","0","step","0.001"],["formControlName","isActive"],[1,"checkbox-label"],[1,"messages-container"],["class","error-message",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"item-buttons"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","isActive-icon",4,"ngIf","ngIfElse"],["inactiveIcon",""],[1,"isActive-icon"],[1,"isInactive-icon"],["mat-header-cell","","mat-sort-header","",1,"center-text"],["aria-label","View Weight",1,"item-buttons",3,"click"],["aria-hidden","false","fontIcon","open_in_new","color","accent"],["mat-header-row",""],["mat-row","",1,"small-element"],[1,"spinner"],["color","primary","mode","indeterminate"],[1,"error-message"],[1,"alert","alert-success"]],template:function(s,r){if(1&s&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Weight - Pipe Property"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"table",2),t.ynx(7,3),t.YNc(8,at,2,0,"th",4),t.YNc(9,st,2,1,"td",5),t.BQk(),t.ynx(10,6),t.YNc(11,ct,2,0,"th",4),t.YNc(12,gt,2,1,"td",5),t.BQk(),t.ynx(13,7),t.YNc(14,lt,2,0,"th",4),t.YNc(15,dt,4,2,"td",5),t.BQk(),t.ynx(16,8),t.YNc(17,mt,2,0,"th",9),t.YNc(18,ut,3,0,"td",5),t.BQk(),t.YNc(19,Pt,1,0,"tr",10),t.YNc(20,ft,1,0,"tr",11),t.qZA(),t.YNc(21,Wt,2,0,"div",12),t.ALo(22,"async"),t.qZA()(),t.TgZ(23,"mat-card",13)(24,"mat-card-header")(25,"mat-card-title"),t._uU(26),t.qZA()(),t.TgZ(27,"mat-card-content")(28,"form",14)(29,"div",15)(30,"mat-form-field",16)(31,"mat-label"),t._uU(32,"Weight Metric (kg)"),t.qZA(),t._UZ(33,"input",17),t.YNc(34,Ct,2,0,"mat-error",18),t.YNc(35,yt,2,0,"mat-error",18),t.qZA(),t.TgZ(36,"mat-form-field",16)(37,"mat-label"),t._uU(38,"Weight Imperial (pounds)"),t.qZA(),t._UZ(39,"input",19),t.YNc(40,_t,2,0,"mat-error",18),t.YNc(41,vt,2,0,"mat-error",18),t.qZA(),t.TgZ(42,"mat-checkbox",20)(43,"div",21),t._uU(44,"Is Active"),t.qZA()()(),t.TgZ(45,"div",22),t.YNc(46,wt,2,1,"div",23),t.ALo(47,"async"),t.YNc(48,Mt,2,0,"div",24),t.ALo(49,"async"),t.YNc(50,xt,2,0,"div",24),t.ALo(51,"async"),t.qZA()()(),t.TgZ(52,"mat-card-actions")(53,"div",25)(54,"button",26),t.NdJ("click",function(){return r.saveOrUpdateWeight()}),t._uU(55),t.qZA(),t.TgZ(56,"button",27),t.NdJ("click",function(){return r.resetForm()}),t._uU(57,"Cancel"),t.qZA()()()()()),2&s){let c,p,b,Z;t.xp6(6),t.Q6J("dataSource",r.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("ngIf",t.lcZ(22,15,r.loadingWeights$)),t.xp6(5),t.Oqu(r.editingWeight?"Edit Weight":"Create New Weight"),t.xp6(2),t.Q6J("formGroup",r.weightForm),t.xp6(6),t.Q6J("ngIf",null==(c=r.weightForm.get("weightInKgPerMeter"))||null==c.errors?null:c.errors.required),t.xp6(1),t.Q6J("ngIf",null==(p=r.weightForm.get("weightInKgPerMeter"))||null==p.errors?null:p.errors.min),t.xp6(5),t.Q6J("ngIf",null==(b=r.weightForm.get("weightInLbsPerFoot"))||null==b.errors?null:b.errors.required),t.xp6(1),t.Q6J("ngIf",null==(Z=r.weightForm.get("weightInLbsPerFoot"))||null==Z.errors?null:Z.errors.min),t.xp6(5),t.Q6J("ngIf",t.lcZ(47,17,r.errorMessage$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(49,19,r.isWeightCreated$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(51,21,r.isWeightUpdated$)),t.xp6(4),t.Q6J("disabled",!r.weightForm.valid),t.xp6(1),t.hij(" ",r.editingWeight?"Update":"Create"," ")}},dependencies:[C.O5,u.a8,u.hq,u.dn,u.dk,u.n5,I.Hw,T.Ou,h.BZ,h.fO,h.as,h.w1,h.Dz,h.nj,h.ge,h.ev,h.XQ,h.Gk,W.KE,W.hX,W.TO,A.oG,g._Y,g.Fj,g.wV,g.JJ,g.JL,g.qQ,g.sg,g.u,U.Nt,C.Ov],styles:[".center-text[_ngcontent-%COMP%]{text-align:center}.messages-container[_ngcontent-%COMP%]{margin-top:0}.error-message[_ngcontent-%COMP%], .alert.alert-success[_ngcontent-%COMP%]{margin-bottom:5px}.error-message[_ngcontent-%COMP%]{color:#961b0f;font-weight:700}.alert.alert-success[_ngcontent-%COMP%]{color:#19806f;font-weight:700}.container-tab[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start}.widget-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.section[_ngcontent-%COMP%], .editor-card[_ngcontent-%COMP%]{flex:1;margin:1rem}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:white}.category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.full-width-input[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:20px}.isActive-icon[_ngcontent-%COMP%]{color:green}.isInactive-icon[_ngcontent-%COMP%]{color:red}.item-buttons[_ngcontent-%COMP%]{width:100%;text-align:center;border:0;background-color:transparent}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:medium;margin-bottom:1rem}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.mat-card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.mat-card-actions[_ngcontent-%COMP%]{margin-top:auto}.mat-card[_ngcontent-%COMP%]{text-align:center}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}mat-card-title[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-weight:500;font-size:1.4rem}mat-form-field[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.section[_ngcontent-%COMP%], .category-editor-card[_ngcontent-%COMP%]{width:calc(100% - 2rem)}}.mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%], .mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;height:auto;line-height:normal}.myTable[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.myTable[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .myTable[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{white-space:nowrap;width:100%;box-sizing:border-box;background-color:#fff}.myTable[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;height:1.5rem;width:1.5rem;line-height:1.5rem}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.small-element[_ngcontent-%COMP%]{height:30px;min-height:30px}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-layout[_ngcontent-%COMP%]{width:auto}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{white-space:nowrap}.checkbox-label[_ngcontent-%COMP%]{width:auto;white-space:nowrap}"]})}return e})()}];let Zt=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[F.Bz.forChild(bt),F.Bz]})}return e})();var w=a(4664),M=a(6306),x=a(2096),Ot=a(1767);let It=(()=>{class e{constructor(o,s){this.actions$=o,this.pipePropertiesService=s,this.loadWeights$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(y),(0,w.w)(()=>this.pipePropertiesService.getWeights(null).pipe((0,P.U)(r=>$({weights:r})),(0,M.K)(r=>(0,x.of)(S({errorLoadingWeights:r}))))))),this.createWeight$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(_),(0,w.w)(({weightCreate:r})=>this.pipePropertiesService.createWeight(r).pipe((0,P.U)(c=>L({weight:c})),(0,M.K)(c=>(0,x.of)(K({errorCreatingWeight:c}))))))),this.updateWeight$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(v),(0,w.w)(({id:r,weight:c})=>this.pipePropertiesService.updateWeight(r,c).pipe((0,P.U)(()=>Y({id:r,weight:c})),(0,M.K)(p=>(0,x.of)(k({errorUpdatingWeight:p})))))))}static#t=this.\u0275fac=function(s){return new(s||e)(t.LFG(m.eX),t.LFG(Ot.Q))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})(),Tt=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[C.ez,Zt,u.QW,I.Ps,T.Cq,h.p0,W.lN,A.p9,g.UX,g.u5,U.c,i.Aw.forFeature("pipeProperty_Weight",et),m.sQ.forFeature([It])]})}return e})()}}]);