"use strict";(self.webpackChunkInventory_Web=self.webpackChunkInventory_Web||[]).push([[692],{692:(Ot,b,r)=>{r.r(b),r.d(b,{PipePropertyCoatingModule:()=>xt});var f=r(6814),u=r(5195),A=r(617),U=r(5940),l=r(5313),y=r(5683),T=r(5986),d=r(6223),n=r(4221),C=r(5154),w=r(2032),$=r(1303),D=r(8645),N=r(2572),h=r(7398),R=r(9773),j=r(8180),z=r(6293);const p="[Pipe Properties Coating]",v=(0,n.PH)(`${p} Get Coatings`,(0,n.Ky)()),I=(0,n.PH)(`${p} Get Coatings Success`,(0,n.Ky)()),S=(0,n.PH)(`${p} Get Coatings Failure`,(0,n.Ky)()),_=(0,n.PH)(`${p} Create PipeProperty_Coating`,(0,n.Ky)()),F=(0,n.PH)(`${p} Create PipeProperty_Coating Success`,(0,n.Ky)()),E=(0,n.PH)(`${p} Create PipeProperty_Coating Error`,(0,n.Ky)()),x=(0,n.PH)(`${p} Update PipeProperty_Coating`,(0,n.Ky)()),Y=(0,n.PH)(`${p} Update PipeProperty_Coating Success`,(0,n.Ky)()),k=(0,n.PH)(`${p} Update PipeProperty_Coating Error`,(0,n.Ky)()),J=(0,n.PH)(`${p} Reset Coating Notifications`),P=(0,z.H)({sortComparer:function B(e,o){return e.name.localeCompare(o.name)},selectId:e=>e.pipeProperty_CoatingId}),q=P.getInitialState({ids:[],entities:{},loadingCoatings:!1,errorLoadingCoatings:null,creatingCoating:!1,createdCoating:null,errorCreatingCoating:null,updatingCoating:!1,updatedCoating:null,errorUpdatingCoating:null,selectedCoating:null,errorLoadingSelectedCoating:null}),X=(0,n.Lq)(q,(0,n.on)(v,e=>({...e,loadingCoatings:!0,errorLoadingCoatings:null})),(0,n.on)(I,(e,{coatings:o})=>P.addMany(o,{...e,loadingCoatings:!1,errorLoadingCoatings:null})),(0,n.on)(S,(e,{errorLoadingCoatings:o})=>({...e,loadingCoatings:!1,errorLoadingCoatings:o})),(0,n.on)(_,e=>({...e,creatingCoating:!0,createdCoating:null,errorCreatingCoating:null})),(0,n.on)(F,(e,{coating:o})=>P.addOne(o,{...e,creatingCoating:!1,createdCoating:o,errorCreatingCoating:null})),(0,n.on)(E,(e,{errorCreatingCoating:o})=>({...e,creatingCoating:!1,errorCreatingCoating:o})),(0,n.on)(x,e=>({...e,updatingCoating:!0,errorUpdatingCoating:null})),(0,n.on)(Y,(e,{id:o,coating:a})=>P.updateOne({id:o,changes:a},{...e,updatingCoating:!1,updatedCoating:a,errorUpdatingCoating:null})),(0,n.on)(k,(e,{errorUpdatingCoating:o})=>({...e,updatingCoating:!1,errorUpdatingCoating:o})),(0,n.on)(J,e=>({...e,createdCoating:null,updatedCoating:null,errorLoadingCoatings:null,errorCreatingCoating:null,errorUpdatingCoating:null})));function V(e,o){return X(e,o)}const{selectEntities:tt,selectAll:et}=P.getSelectors(),g=(0,n.ZF)("pipeProperty_Coating"),nt=((0,n.P1)(g,e=>e),(0,n.P1)(g,et)),ot=((0,n.P1)(g,tt),(0,n.P1)(g,e=>e.loadingCoatings)),L=(0,n.P1)(g,e=>e.errorLoadingCoatings),G=((0,n.P1)(g,e=>e.creatingCoating),(0,n.P1)(g,e=>e.createdCoating)),H=(0,n.P1)(g,e=>e.errorCreatingCoating),Q=((0,n.P1)(g,e=>e.selectedCoating),(0,n.P1)(g,e=>e.errorLoadingSelectedCoating)),K=((0,n.P1)(g,e=>e.updatingCoating),(0,n.P1)(g,e=>e.updatedCoating));(0,n.P1)(g,e=>e.errorUpdatingCoating);var t=r(5879);function it(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Name"),t.qZA())}function at(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function rt(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Is Active"),t.qZA())}function ct(e,o){1&e&&(t.TgZ(0,"mat-icon",28),t._uU(1,"check"),t.qZA())}function st(e,o){1&e&&(t.TgZ(0,"mat-icon",29),t._uU(1,"close"),t.qZA())}function gt(e,o){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,ct,2,0,"mat-icon",26),t.YNc(2,st,2,0,"ng-template",null,27,t.W1O),t.qZA()),2&e){const a=o.$implicit,c=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.isActive)("ngIfElse",c)}}function lt(e,o){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Edit"),t.qZA())}function dt(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"td",25)(1,"button",31),t.NdJ("click",function(){const s=t.CHM(a).$implicit,m=t.oxw();return t.KtG(m.selectCoating(s))}),t._UZ(2,"mat-icon",32),t.qZA()()}}function pt(e,o){1&e&&t._UZ(0,"tr",33)}function Ct(e,o){1&e&&t._UZ(0,"tr",34)}function mt(e,o){1&e&&(t.TgZ(0,"div",35),t._UZ(1,"mat-progress-spinner",36),t.qZA())}function ut(e,o){if(1&e&&(t.TgZ(0,"div",37),t._uU(1),t.qZA()),2&e){const a=o.ngIf;t.xp6(1),t.hij(" ",a," ")}}function ht(e,o){1&e&&(t.TgZ(0,"div",38),t._uU(1," Coating created successfully! "),t.qZA())}function Pt(e,o){1&e&&(t.TgZ(0,"div",38),t._uU(1," Coating updated successfully! "),t.qZA())}const ft=[{path:"",component:(()=>{class e{constructor(a,c){this.store=a,this.fb=c,this.displayedColumns=["name","isActive","actions"],this.editingCoating=null,this.destroy$=new D.x,this.coatingForm=this.fb.group({name:["",d.kI.required],isActive:[!0,d.kI.required]}),this.dataSource=new l.by([]),this.errorMessage$=(0,N.a)([this.store.select(L),this.store.select(H),this.store.select(Q)]).pipe((0,h.U)(([i,s,m])=>i||s||m?"An error occurred":"")),this.isCoatingCreated$=this.store.select(G).pipe((0,h.U)(i=>!!i)),this.isCoatingUpdated$=this.store.select(K).pipe((0,h.U)(i=>!!i))}ngOnInit(){this.loadingCoatings$=this.store.select(ot),this.store.dispatch(v({searchParams:null})),this.store.pipe((0,n.Ys)(nt),(0,R.R)(this.destroy$)).subscribe(a=>this.dataSource.data=a)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.loadingCoatingsSubscription&&this.loadingCoatingsSubscription.unsubscribe(),this.checkAndResetNotifications()}selectCoating(a){this.editingCoating=a,this.coatingForm.patchValue(a),this.checkAndResetNotifications()}checkAndResetNotifications(){(0,N.a)([this.store.select(G),this.store.select(K),this.store.select(L),this.store.select(H),this.store.select(Q)]).pipe((0,j.q)(1)).subscribe(([a,c,i,s,m])=>{(a||c||i||s||m)&&this.store.dispatch(J())})}saveOrUpdateCoating(){if(this.editingCoating){const c={...this.editingCoating,...this.coatingForm.value};this.store.dispatch(x({id:this.editingCoating.pipeProperty_CoatingId,coating:c}))}else this.store.dispatch(_({coatingCreate:this.coatingForm.value}));this.resetForm()}resetForm(){this.editingCoating=null,this.coatingForm.reset({name:"",isActive:!0}),this.checkAndResetNotifications()}static#t=this.\u0275fac=function(c){return new(c||e)(t.Y36(n.yh),t.Y36(d.qu))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-pipe-property-coating"]],decls:46,vars:19,consts:[[1,"container-tab"],[1,"section"],["mat-table","","matSort","",1,"myTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","class","center-text",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","small-element",4,"matRowDef","matRowDefColumns"],["class","spinner",4,"ngIf"],[1,"editor-card"],[1,"coating-form",3,"formGroup"],[1,"widget-container"],["appearance","fill",1,"full-width-input"],["matInput","","formControlName","name"],["formControlName","isActive"],[1,"messages-container"],["class","error-message",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"item-buttons"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-stroked-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","isActive-icon",4,"ngIf","ngIfElse"],["inactiveIcon",""],[1,"isActive-icon"],[1,"isInactive-icon"],["mat-header-cell","","mat-sort-header","",1,"center-text"],["aria-label","Edit Coating",1,"item-buttons",3,"click"],["aria-hidden","false","fontIcon","open_in_new","color","accent"],["mat-header-row",""],["mat-row","",1,"small-element"],[1,"spinner"],["color","primary","mode","indeterminate"],[1,"error-message"],[1,"alert","alert-success"]],template:function(c,i){1&c&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Coating - Pipe Property"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"table",2),t.ynx(7,3),t.YNc(8,it,2,0,"th",4),t.YNc(9,at,2,1,"td",5),t.BQk(),t.ynx(10,6),t.YNc(11,rt,2,0,"th",4),t.YNc(12,gt,4,2,"td",5),t.BQk(),t.ynx(13,7),t.YNc(14,lt,2,0,"th",8),t.YNc(15,dt,3,0,"td",5),t.BQk(),t.YNc(16,pt,1,0,"tr",9),t.YNc(17,Ct,1,0,"tr",10),t.qZA(),t.YNc(18,mt,2,0,"div",11),t.ALo(19,"async"),t.qZA()(),t.TgZ(20,"mat-card",12)(21,"mat-card-header")(22,"mat-card-title"),t._uU(23),t.qZA()(),t.TgZ(24,"mat-card-content")(25,"form",13)(26,"div",14)(27,"mat-form-field",15)(28,"mat-label"),t._uU(29,"Name"),t.qZA(),t._UZ(30,"input",16),t.qZA(),t.TgZ(31,"mat-checkbox",17),t._uU(32,"Is Active"),t.qZA()(),t.TgZ(33,"div",18),t.YNc(34,ut,2,1,"div",19),t.ALo(35,"async"),t.YNc(36,ht,2,0,"div",20),t.ALo(37,"async"),t.YNc(38,Pt,2,0,"div",20),t.ALo(39,"async"),t.qZA()()(),t.TgZ(40,"mat-card-actions")(41,"div",21)(42,"button",22),t.NdJ("click",function(){return i.saveOrUpdateCoating()}),t._uU(43),t.qZA(),t.TgZ(44,"button",23),t.NdJ("click",function(){return i.resetForm()}),t._uU(45,"Cancel"),t.qZA()()()()()),2&c&&(t.xp6(6),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",t.lcZ(19,11,i.loadingCoatings$)),t.xp6(5),t.Oqu(i.editingCoating?"Edit Coating":"Create New Coating"),t.xp6(2),t.Q6J("formGroup",i.coatingForm),t.xp6(9),t.Q6J("ngIf",t.lcZ(35,13,i.errorMessage$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(37,15,i.isCoatingCreated$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(39,17,i.isCoatingUpdated$)),t.xp6(4),t.Q6J("disabled",!i.coatingForm.valid),t.xp6(1),t.hij(" ",i.editingCoating?"Update":"Create"," "))},dependencies:[f.O5,u.a8,u.hq,u.dn,u.dk,u.n5,A.Hw,U.Ou,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,y.KE,y.hX,T.oG,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,w.Nt,f.Ov],styles:[".center-text[_ngcontent-%COMP%]{text-align:center}.messages-container[_ngcontent-%COMP%]{margin-top:0}.error-message[_ngcontent-%COMP%], .alert.alert-success[_ngcontent-%COMP%]{margin-bottom:5px}.error-message[_ngcontent-%COMP%]{color:#961b0f;font-weight:700}.alert.alert-success[_ngcontent-%COMP%]{color:#19806f;font-weight:700}.container-tab[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start}.widget-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.section[_ngcontent-%COMP%], .editor-card[_ngcontent-%COMP%]{flex:1;margin:1rem}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:white}.category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.full-width-input[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:20px}.isActive-icon[_ngcontent-%COMP%]{color:green}.isInactive-icon[_ngcontent-%COMP%]{color:red}.item-buttons[_ngcontent-%COMP%]{width:100%;text-align:center;border:0;background-color:transparent}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:medium;margin-bottom:1rem}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.mat-card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.mat-card-actions[_ngcontent-%COMP%]{margin-top:auto}.mat-card[_ngcontent-%COMP%]{text-align:center}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}mat-card-title[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-weight:500;font-size:1.4rem}mat-form-field[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.section[_ngcontent-%COMP%], .category-editor-card[_ngcontent-%COMP%]{width:calc(100% - 2rem)}}.mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%], .mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;height:auto;line-height:normal}.myTable[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.myTable[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .myTable[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{white-space:nowrap;width:100%;box-sizing:border-box;background-color:#fff}.myTable[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;height:1.5rem;width:1.5rem;line-height:1.5rem}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.small-element[_ngcontent-%COMP%]{height:30px;min-height:30px}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-layout[_ngcontent-%COMP%]{width:auto}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{white-space:nowrap}.checkbox-label[_ngcontent-%COMP%]{width:auto;white-space:nowrap}"]})}return e})()}];let yt=(()=>{class e{static#t=this.\u0275fac=function(c){return new(c||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[$.Bz.forChild(ft),$.Bz]})}return e})();var O=r(4664),M=r(6306),Z=r(2096),vt=r(1767);let _t=(()=>{class e{constructor(a,c){this.actions$=a,this.pipePropertiesService=c,this.loadcoatings$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(v),(0,O.w)(()=>this.pipePropertiesService.getGetCoating(null).pipe((0,h.U)(i=>I({coatings:i})),(0,M.K)(i=>(0,Z.of)(S({errorLoadingCoatings:i}))))))),this.createCoating$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(_),(0,O.w)(i=>this.pipePropertiesService.createCoating(i.coatingCreate).pipe((0,h.U)(s=>F({coating:s})),(0,M.K)(s=>(0,Z.of)(E({errorCreatingCoating:s}))))))),this.updateCoating$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(x),(0,O.w)(({id:i,coating:s})=>this.pipePropertiesService.updateCoating(i,s).pipe((0,h.U)(()=>Y({id:i,coating:s})),(0,M.K)(m=>(0,Z.of)(k({errorUpdatingCoating:m})))))))}static#t=this.\u0275fac=function(c){return new(c||e)(t.LFG(C.eX),t.LFG(vt.Q))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})(),xt=(()=>{class e{static#t=this.\u0275fac=function(c){return new(c||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[f.ez,yt,u.QW,A.Ps,U.Cq,l.p0,y.lN,T.p9,d.UX,d.u5,w.c,n.Aw.forFeature("pipeProperty_Coating",V),C.sQ.forFeature([_t])]})}return e})()}}]);