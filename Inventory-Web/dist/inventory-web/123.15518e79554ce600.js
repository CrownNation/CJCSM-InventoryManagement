"use strict";(self.webpackChunkInventory_Web=self.webpackChunkInventory_Web||[]).push([[123],{5123:(_t,Z,a)=>{a.r(Z),a.d(Z,{PipePropertyCategoryModule:()=>Mt});var f=a(6814),m=a(5195),A=a(617),U=a(5940),l=a(5313),P=a(5683),T=a(5986),d=a(6223),o=a(4221),C=a(5154),w=a(2032),$=a(1303),R=a(8645),I=a(2572),u=a(7398),j=a(9773),z=a(8180),B=a(6293);const p="[Pipe Properties Category]",v=(0,o.PH)(`${p} Get Categories`,(0,o.Ky)()),N=(0,o.PH)(`${p} Get Categories Success`,(0,o.Ky)()),S=(0,o.PH)(`${p} Get Categories Failure`,(0,o.Ky)()),x=(0,o.PH)(`${p} Create PipeProperty_Cateogry`,(0,o.Ky)()),F=(0,o.PH)(`${p} Create PipeProperty_Cateogry Success`,(0,o.Ky)()),Y=(0,o.PH)(`${p} Create PipeProperty_Cateogry Error`,(0,o.Ky)()),O=(0,o.PH)(`${p} Update PipeProperty_Category`,(0,o.Ky)()),E=(0,o.PH)(`${p} Update PipeProperty_Category Success`,(0,o.Ky)()),J=(0,o.PH)(`${p} Update PipeProperty_Category Error`,(0,o.Ky)()),L=(0,o.PH)(`${p} Reset Category Notifications`),h=(0,B.H)({sortComparer:function W(e,r){return e.name.localeCompare(r.name)},selectId:e=>e.pipeProperty_CategoryId}),X=h.getInitialState({ids:[],entities:{},loadingCategories:!1,errorLoadingCategories:null,creatingCategory:!1,createdCategory:null,errorCreatingCategory:null,updatingCategory:!1,updatedCategory:null,errorUpdatingCategory:null,selectedCategory:null,errorLoadingSelectedCategory:null}),V=(0,o.Lq)(X,(0,o.on)(v,e=>({...e,loadingCategories:!0,errorLoadingCategories:null})),(0,o.on)(N,(e,{categories:r})=>h.addMany(r,{...e,loadingCategories:!1,errorLoadingCategories:null})),(0,o.on)(S,(e,{errorLoadingCategories:r})=>({...e,loadingCategories:!1,errorLoadingCategories:r})),(0,o.on)(x,e=>({...e,creatingCategory:!0,createdCategory:null,errorCreatingCategory:null})),(0,o.on)(F,(e,{category:r})=>h.addOne(r,{...e,creatingCategory:!1,createdCategory:r,errorCreatingCategory:null})),(0,o.on)(Y,(e,{errorCreatingCategory:r})=>({...e,creatingCategory:!1,errorCreatingCategory:r})),(0,o.on)(O,e=>({...e,updatingCategory:!0,updatedCategory:null,errorUpdatingCategory:null})),(0,o.on)(E,(e,{category:r})=>h.updateOne({id:r.pipeProperty_CategoryId,changes:r},{...e,updatingCategory:!1,updatedCategory:r,errorUpdatingCategory:null})),(0,o.on)(J,(e,{errorUpdatingCategory:r})=>({...e,updatingCategory:!1,errorUpdatingCategory:r})),(0,o.on)(L,e=>({...e,createdCategory:null,updatedCategory:null,errorLoadingCategories:null,errorCreatingCategory:null,errorUpdatingCategory:null})));function tt(e,r){return V(e,r)}const{selectEntities:et,selectAll:ot}=h.getSelectors(),g=(0,o.ZF)("pipeProperty_Category"),rt=((0,o.P1)(g,e=>e),(0,o.P1)(g,ot)),nt=((0,o.P1)(g,et),(0,o.P1)(g,e=>e.loadingCategories)),k=(0,o.P1)(g,e=>e.errorCreatingCategory),H=((0,o.P1)(g,e=>e.creatingCategory),(0,o.P1)(g,e=>e.createdCategory)),Q=(0,o.P1)(g,e=>e.errorCreatingCategory),G=((0,o.P1)(g,e=>e.selectedCategory),(0,o.P1)(g,e=>e.errorLoadingSelectedCategory)),K=((0,o.P1)(g,e=>e.updatingCategory),(0,o.P1)(g,e=>e.updatedCategory));(0,o.P1)(g,e=>e.errorUpdatingCategory);var t=a(5879);function at(e,r){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Name"),t.qZA())}function it(e,r){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const i=r.$implicit;t.xp6(1),t.hij(" ",i.name," ")}}function ct(e,r){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Is Active"),t.qZA())}function st(e,r){1&e&&(t.TgZ(0,"mat-icon",29),t._uU(1,"check"),t.qZA())}function gt(e,r){1&e&&(t.TgZ(0,"mat-icon",30),t._uU(1,"close"),t.qZA())}function lt(e,r){if(1&e&&(t.TgZ(0,"td",26),t.YNc(1,st,2,0,"mat-icon",27),t.YNc(2,gt,2,0,"ng-template",null,28,t.W1O),t.qZA()),2&e){const i=r.$implicit,c=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.isActive)("ngIfElse",c)}}function dt(e,r){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Edit"),t.qZA())}function pt(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"td",26)(1,"button",32),t.NdJ("click",function(){const s=t.CHM(i).$implicit,y=t.oxw();return t.KtG(y.selectCategory(s))}),t._UZ(2,"mat-icon",33),t.qZA()()}}function Ct(e,r){1&e&&t._UZ(0,"tr",34)}function yt(e,r){1&e&&t._UZ(0,"tr",35)}function mt(e,r){1&e&&(t.TgZ(0,"div",36),t._UZ(1,"mat-progress-spinner",37),t.qZA())}function ut(e,r){if(1&e&&(t.TgZ(0,"div",38),t._uU(1),t.qZA()),2&e){const i=r.ngIf;t.xp6(1),t.hij(" ",i," ")}}function ht(e,r){1&e&&(t.TgZ(0,"div",39),t._uU(1," Category created successfully! "),t.qZA())}function ft(e,r){1&e&&(t.TgZ(0,"div",39),t._uU(1," Category updated successfully! "),t.qZA())}const Pt=[{path:"",component:(()=>{class e{constructor(i,c){this.store=i,this.fb=c,this.displayedColumns=["name","isActive","actions"],this.editingCategory=null,this.destroy$=new R.x,this.categoryForm=this.fb.group({name:["",d.kI.required],isActive:[!0,d.kI.required]}),this.dataSource=new l.by([]),this.errorMessage$=(0,I.a)([this.store.select(k),this.store.select(Q),this.store.select(G)]).pipe((0,u.U)(([n,s,y])=>n||s||y?"An error occurred":"")),this.isCategoryCreated$=this.store.select(H).pipe((0,u.U)(n=>!!n)),this.isCategoryUpdated$=this.store.select(K).pipe((0,u.U)(n=>!!n))}ngOnInit(){this.loadingCategories$=this.store.select(nt),this.store.dispatch(v({searchParams:null})),this.store.pipe((0,o.Ys)(rt),(0,j.R)(this.destroy$)).subscribe(i=>this.dataSource.data=i)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.loadingCategoriesSubscription&&this.loadingCategoriesSubscription.unsubscribe(),this.checkAndResetNotifications()}selectCategory(i){this.editingCategory=i,this.categoryForm.patchValue(i),this.checkAndResetNotifications()}checkAndResetNotifications(){(0,I.a)([this.store.select(H),this.store.select(K),this.store.select(k),this.store.select(Q),this.store.select(G)]).pipe((0,z.q)(1)).subscribe(([i,c,n,s,y])=>{(i||c||n||s||y)&&this.store.dispatch(L())})}saveOrUpdateCategory(){if(this.editingCategory){const c={...this.editingCategory,...this.categoryForm.value};this.store.dispatch(O({id:this.editingCategory.pipeProperty_CategoryId,category:c}))}else this.store.dispatch(x({categoryCreate:this.categoryForm.value}));this.resetForm()}resetForm(){this.editingCategory=null,this.categoryForm.reset({name:"",isActive:!0}),this.checkAndResetNotifications()}static#t=this.\u0275fac=function(c){return new(c||e)(t.Y36(o.yh),t.Y36(d.qu))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-pipe-property-category"]],decls:47,vars:19,consts:[[1,"container-tab"],[1,"section"],["mat-table","","matSort","",1,"myTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","class","center-text",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","small-element",4,"matRowDef","matRowDefColumns"],["class","spinner",4,"ngIf"],[1,"editor-card"],[1,"category-form",3,"formGroup"],[1,"widget-container"],["appearance","fill",1,"full-width-input"],["matInput","","formControlName","name"],["formControlName","isActive"],[1,"checkbox-label"],[1,"messages-container"],["class","error-message",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"item-buttons"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","isActive-icon",4,"ngIf","ngIfElse"],["inactiveIcon",""],[1,"isActive-icon"],[1,"isInactive-icon"],["mat-header-cell","","mat-sort-header","",1,"center-text"],["aria-label","View Category",1,"item-buttons",3,"click"],["aria-hidden","false","fontIcon","open_in_new","color","accent"],["mat-header-row",""],["mat-row","",1,"small-element"],[1,"spinner"],["color","primary","mode","indeterminate"],[1,"error-message"],[1,"alert","alert-success"]],template:function(c,n){1&c&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Category - Pipe Property"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"table",2),t.ynx(7,3),t.YNc(8,at,2,0,"th",4),t.YNc(9,it,2,1,"td",5),t.BQk(),t.ynx(10,6),t.YNc(11,ct,2,0,"th",4),t.YNc(12,lt,4,2,"td",5),t.BQk(),t.ynx(13,7),t.YNc(14,dt,2,0,"th",8),t.YNc(15,pt,3,0,"td",5),t.BQk(),t.YNc(16,Ct,1,0,"tr",9),t.YNc(17,yt,1,0,"tr",10),t.qZA(),t.YNc(18,mt,2,0,"div",11),t.ALo(19,"async"),t.qZA()(),t.TgZ(20,"mat-card",12)(21,"mat-card-header")(22,"mat-card-title"),t._uU(23),t.qZA()(),t.TgZ(24,"mat-card-content")(25,"form",13)(26,"div",14)(27,"mat-form-field",15)(28,"mat-label"),t._uU(29,"Name"),t.qZA(),t._UZ(30,"input",16),t.qZA(),t.TgZ(31,"mat-checkbox",17)(32,"div",18),t._uU(33,"Is Active"),t.qZA()()(),t.TgZ(34,"div",19),t.YNc(35,ut,2,1,"div",20),t.ALo(36,"async"),t.YNc(37,ht,2,0,"div",21),t.ALo(38,"async"),t.YNc(39,ft,2,0,"div",21),t.ALo(40,"async"),t.qZA()()(),t.TgZ(41,"mat-card-actions")(42,"div",22)(43,"button",23),t.NdJ("click",function(){return n.saveOrUpdateCategory()}),t._uU(44),t.qZA(),t.TgZ(45,"button",24),t.NdJ("click",function(){return n.resetForm()}),t._uU(46,"Cancel"),t.qZA()()()()()),2&c&&(t.xp6(6),t.Q6J("dataSource",n.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",t.lcZ(19,11,n.loadingCategories$)),t.xp6(5),t.Oqu(n.editingCategory?"Edit Category":"Create New Category"),t.xp6(2),t.Q6J("formGroup",n.categoryForm),t.xp6(10),t.Q6J("ngIf",t.lcZ(36,13,n.errorMessage$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(38,15,n.isCategoryCreated$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(40,17,n.isCategoryUpdated$)),t.xp6(4),t.Q6J("disabled",!n.categoryForm.valid),t.xp6(1),t.hij(" ",n.editingCategory?"Update":"Create"," "))},dependencies:[f.O5,m.a8,m.hq,m.dn,m.dk,m.n5,A.Hw,U.Ou,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,P.KE,P.hX,T.oG,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,w.Nt,f.Ov],styles:[".center-text[_ngcontent-%COMP%]{text-align:center}.messages-container[_ngcontent-%COMP%]{margin-top:0}.error-message[_ngcontent-%COMP%], .alert.alert-success[_ngcontent-%COMP%]{margin-bottom:5px}.error-message[_ngcontent-%COMP%]{color:#961b0f;font-weight:700}.alert.alert-success[_ngcontent-%COMP%]{color:#19806f;font-weight:700}.container-tab[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start}.widget-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.section[_ngcontent-%COMP%], .editor-card[_ngcontent-%COMP%]{flex:1;margin:1rem}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:white}.category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.full-width-input[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:20px}.isActive-icon[_ngcontent-%COMP%]{color:green}.isInactive-icon[_ngcontent-%COMP%]{color:red}.item-buttons[_ngcontent-%COMP%]{width:100%;text-align:center;border:0;background-color:transparent}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:medium;margin-bottom:1rem}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.mat-card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.mat-card-actions[_ngcontent-%COMP%]{margin-top:auto}.mat-card[_ngcontent-%COMP%]{text-align:center}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}mat-card-title[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-weight:500;font-size:1.4rem}mat-form-field[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.section[_ngcontent-%COMP%], .category-editor-card[_ngcontent-%COMP%]{width:calc(100% - 2rem)}}.mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%], .mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;height:auto;line-height:normal}.myTable[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.myTable[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .myTable[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{white-space:nowrap;width:100%;box-sizing:border-box;background-color:#fff}.myTable[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;height:1.5rem;width:1.5rem;line-height:1.5rem}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.small-element[_ngcontent-%COMP%]{height:30px;min-height:30px}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-layout[_ngcontent-%COMP%]{width:auto}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{white-space:nowrap}.checkbox-label[_ngcontent-%COMP%]{width:auto;white-space:nowrap}"]})}return e})()}];let vt=(()=>{class e{static#t=this.\u0275fac=function(c){return new(c||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[$.Bz.forChild(Pt),$.Bz]})}return e})();var D=a(9397),M=a(4664),_=a(6306),b=a(2096),xt=a(1767);let Ot=(()=>{class e{constructor(i,c){this.actions$=i,this.pipePropertiesService=c,this.loadCategories$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(v),(0,D.b)(()=>console.log("Loading categories...")),(0,M.w)(()=>(console.log("Inside switchMap for loading categories"),this.pipePropertiesService.getCategory(null).pipe((0,D.b)(n=>console.log("Categories retrieved:",n)),(0,u.U)(n=>N({categories:n})),(0,_.K)(n=>(0,b.of)(S({errorLoadingCategories:n})))))))),this.createCategory$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(x),(0,M.w)(n=>this.pipePropertiesService.createCategory(n.categoryCreate).pipe((0,u.U)(s=>F({category:s})),(0,_.K)(s=>(0,b.of)(Y({errorCreatingCategory:s}))))))),this.updateCategory$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(O),(0,M.w)(({id:n,category:s})=>this.pipePropertiesService.updateCategory(n,s).pipe((0,u.U)(()=>E({id:n,category:s})),(0,_.K)(y=>(0,b.of)(J({errorUpdatingCategory:y})))))))}static#t=this.\u0275fac=function(c){return new(c||e)(t.LFG(C.eX),t.LFG(xt.Q))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})(),Mt=(()=>{class e{static#t=this.\u0275fac=function(c){return new(c||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[f.ez,vt,m.QW,A.Ps,U.Cq,l.p0,P.lN,T.p9,d.UX,d.u5,w.c,o.Aw.forFeature("pipeProperty_Category",tt),C.sQ.forFeature([Ot])]})}return e})()}}]);