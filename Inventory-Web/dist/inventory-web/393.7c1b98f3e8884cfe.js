"use strict";(self.webpackChunkInventory_Web=self.webpackChunkInventory_Web||[]).push([[393],{4393:(Ot,b,c)=>{c.r(b),c.d(b,{PipePropertyConditionModule:()=>xt});var f=c(6814),u=c(5195),A=c(617),U=c(5940),l=c(5313),y=c(5683),T=c(5986),p=c(6223),o=c(4221),m=c(5154),w=c(2032),$=c(1303),D=c(8645),N=c(2572),h=c(7398),R=c(9773),j=c(8180),z=c(6293);const C="[Pipe Properties Condition]",v=(0,o.PH)(`${C} Get Conditions`,(0,o.Ky)()),I=(0,o.PH)(`${C} Get Conditions Success`,(0,o.Ky)()),S=(0,o.PH)(`${C} Get Conditions Failure`,(0,o.Ky)()),_=(0,o.PH)(`${C} Create PipeProperty_Condition`,(0,o.Ky)()),F=(0,o.PH)(`${C} Create PipeProperty_Condition Success`,(0,o.Ky)()),E=(0,o.PH)(`${C} Create PipeProperty_Condition Error`,(0,o.Ky)()),x=(0,o.PH)(`${C} Update PipeProperty_Condition`,(0,o.Ky)()),Y=(0,o.PH)(`${C} Update PipeProperty_Condition Success`,(0,o.Ky)()),k=(0,o.PH)(`${C} Update PipeProperty_Condition Error`,(0,o.Ky)()),J=(0,o.PH)(`${C} Reset Conditions Notifications`),P=(0,z.H)({sortComparer:function B(n,e){return n.name.localeCompare(e.name)},selectId:n=>n.pipeProperty_ConditionId}),q=P.getInitialState({ids:[],entities:{},loadingConditions:!1,errorLoadingConditions:null,creatingCondition:!1,createdCondition:null,errorCreatingCondition:null,updatingCondition:!1,updatedCondition:null,errorUpdatingCondition:null,selectedCondition:null,errorLoadingSelectedCondition:null}),X=(0,o.Lq)(q,(0,o.on)(v,n=>({...n,loadingConditions:!0,errorLoadingConditions:null})),(0,o.on)(I,(n,{conditions:e})=>P.addMany(e,{...n,loadingConditions:!1,errorLoadingConditions:null})),(0,o.on)(S,(n,{errorLoadingConditions:e})=>({...n,loadingConditions:!1,errorLoadingConditions:e})),(0,o.on)(_,n=>({...n,creatingCondition:!0,createdCondition:null,errorCreatingCondition:null})),(0,o.on)(F,(n,{condition:e})=>P.addOne(e,{...n,creatingCondition:!1,createdCondition:e,errorCreatingCondition:null})),(0,o.on)(E,(n,{errorCreatingCondition:e})=>({...n,creatingCondition:!1,errorCreatingCondition:e})),(0,o.on)(x,n=>({...n,updatingCondition:!0,errorUpdatingCondition:null})),(0,o.on)(Y,(n,{id:e,condition:r})=>P.updateOne({id:e,changes:r},{...n,updatingCondition:!1,updatedCondition:r,errorUpdatingCondition:null})),(0,o.on)(k,(n,{errorUpdatingCondition:e})=>({...n,updatingCondition:!1,errorUpdatingCondition:e})),(0,o.on)(J,n=>({...n,createdCondition:null,updatedCondition:null,errorLoadingConditions:null,errorCreatingCondition:null,errorUpdatingCondition:null})));function V(n,e){return X(n,e)}const{selectEntities:tt,selectAll:nt}=P.getSelectors(),d=(0,o.ZF)("pipeProperty_Condition"),ot=((0,o.P1)(d,n=>n),(0,o.P1)(d,nt)),et=((0,o.P1)(d,tt),(0,o.P1)(d,n=>n.loadingConditions)),L=(0,o.P1)(d,n=>n.errorLoadingConditions),H=((0,o.P1)(d,n=>n.creatingCondition),(0,o.P1)(d,n=>n.createdCondition)),Q=(0,o.P1)(d,n=>n.errorCreatingCondition),G=((0,o.P1)(d,n=>n.selectedCondition),(0,o.P1)(d,n=>n.errorLoadingSelectedCondition)),K=((0,o.P1)(d,n=>n.updatingCondition),(0,o.P1)(d,n=>n.updatedCondition));(0,o.P1)(d,n=>n.errorUpdatingCondition);var t=c(5879);function it(n,e){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Name"),t.qZA())}function rt(n,e){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const r=e.$implicit;t.xp6(1),t.hij(" ",r.name," ")}}function ct(n,e){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Is Active"),t.qZA())}function at(n,e){1&n&&(t.TgZ(0,"mat-icon",28),t._uU(1,"check"),t.qZA())}function st(n,e){1&n&&(t.TgZ(0,"mat-icon",29),t._uU(1,"close"),t.qZA())}function dt(n,e){if(1&n&&(t.TgZ(0,"td",25),t.YNc(1,at,2,0,"mat-icon",26),t.YNc(2,st,2,0,"ng-template",null,27,t.W1O),t.qZA()),2&n){const r=e.$implicit,a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",r.isActive)("ngIfElse",a)}}function lt(n,e){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Edit"),t.qZA())}function pt(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"td",25)(1,"button",31),t.NdJ("click",function(){const s=t.CHM(r).$implicit,g=t.oxw();return t.KtG(g.selectCondition(s))}),t._UZ(2,"mat-icon",32),t.qZA()()}}function Ct(n,e){1&n&&t._UZ(0,"tr",33)}function mt(n,e){1&n&&t._UZ(0,"tr",34)}function gt(n,e){1&n&&(t.TgZ(0,"div",35),t._UZ(1,"mat-progress-spinner",36),t.qZA())}function ut(n,e){if(1&n&&(t.TgZ(0,"div",37),t._uU(1),t.qZA()),2&n){const r=e.ngIf;t.xp6(1),t.hij(" ",r," ")}}function ht(n,e){1&n&&(t.TgZ(0,"div",38),t._uU(1," Condition created successfully! "),t.qZA())}function Pt(n,e){1&n&&(t.TgZ(0,"div",38),t._uU(1," Condition updated successfully! "),t.qZA())}const ft=[{path:"",component:(()=>{class n{constructor(r,a){this.store=r,this.fb=a,this.displayedColumns=["name","isActive","actions"],this.editingCondition=null,this.destroy$=new D.x,this.conditionForm=this.fb.group({name:["",p.kI.required],isActive:[!0,p.kI.required]}),this.dataSource=new l.by([]),this.errorMessage$=(0,N.a)([this.store.select(L),this.store.select(Q),this.store.select(G)]).pipe((0,h.U)(([i,s,g])=>i||s||g?"An error occurred":"")),this.isConditionCreated$=this.store.select(H).pipe((0,h.U)(i=>!!i)),this.isConditionUpdated$=this.store.select(K).pipe((0,h.U)(i=>!!i))}ngOnInit(){this.loadingConditions$=this.store.select(et),this.store.dispatch(v({searchParams:null})),this.store.pipe((0,o.Ys)(ot),(0,R.R)(this.destroy$)).subscribe(r=>this.dataSource.data=r)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.loadingConditionsSubscription&&this.loadingConditionsSubscription.unsubscribe(),this.checkAndResetNotifications()}selectCondition(r){this.editingCondition=r,this.conditionForm.patchValue(r),this.checkAndResetNotifications()}checkAndResetNotifications(){(0,N.a)([this.store.select(H),this.store.select(K),this.store.select(L),this.store.select(Q),this.store.select(G)]).pipe((0,j.q)(1)).subscribe(([r,a,i,s,g])=>{(r||a||i||s||g)&&this.store.dispatch(J())})}saveOrUpdateCondition(){if(this.editingCondition){const a={...this.editingCondition,...this.conditionForm.value};this.store.dispatch(x({id:this.editingCondition.pipeProperty_ConditionId,condition:a}))}else this.store.dispatch(_({conditionCreate:this.conditionForm.value}));this.resetForm()}resetForm(){this.editingCondition=null,this.conditionForm.reset({name:"",isActive:!0}),this.checkAndResetNotifications()}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(o.yh),t.Y36(p.qu))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-pipe-property-condition"]],decls:46,vars:19,consts:[[1,"container-tab"],[1,"section"],["mat-table","","matSort","",1,"myTable",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-cell","","class","center-text",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","small-element",4,"matRowDef","matRowDefColumns"],["class","spinner",4,"ngIf"],[1,"editor-card"],[1,"condition-form",3,"formGroup"],[1,"widget-container"],["appearance","fill",1,"full-width-input"],["matInput","","formControlName","name"],["formControlName","isActive"],[1,"messages-container"],["class","error-message",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"item-buttons"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-stroked-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","isActive-icon",4,"ngIf","ngIfElse"],["inactiveIcon",""],[1,"isActive-icon"],[1,"isInactive-icon"],["mat-header-cell","",1,"center-text"],["aria-label","Edit Condition",1,"item-buttons",3,"click"],["aria-hidden","false","fontIcon","open_in_new","color","accent"],["mat-header-row",""],["mat-row","",1,"small-element"],[1,"spinner"],["color","primary","mode","indeterminate"],[1,"error-message"],[1,"alert","alert-success"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Condition - Pipe Property"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"table",2),t.ynx(7,3),t.YNc(8,it,2,0,"th",4),t.YNc(9,rt,2,1,"td",5),t.BQk(),t.ynx(10,6),t.YNc(11,ct,2,0,"th",4),t.YNc(12,dt,4,2,"td",5),t.BQk(),t.ynx(13,7),t.YNc(14,lt,2,0,"th",8),t.YNc(15,pt,3,0,"td",5),t.BQk(),t.YNc(16,Ct,1,0,"tr",9),t.YNc(17,mt,1,0,"tr",10),t.qZA(),t.YNc(18,gt,2,0,"div",11),t.ALo(19,"async"),t.qZA()(),t.TgZ(20,"mat-card",12)(21,"mat-card-header")(22,"mat-card-title"),t._uU(23),t.qZA()(),t.TgZ(24,"mat-card-content")(25,"form",13)(26,"div",14)(27,"mat-form-field",15)(28,"mat-label"),t._uU(29,"Name"),t.qZA(),t._UZ(30,"input",16),t.qZA(),t.TgZ(31,"mat-checkbox",17),t._uU(32,"Is Active"),t.qZA()(),t.TgZ(33,"div",18),t.YNc(34,ut,2,1,"div",19),t.ALo(35,"async"),t.YNc(36,ht,2,0,"div",20),t.ALo(37,"async"),t.YNc(38,Pt,2,0,"div",20),t.ALo(39,"async"),t.qZA()()(),t.TgZ(40,"mat-card-actions")(41,"div",21)(42,"button",22),t.NdJ("click",function(){return i.saveOrUpdateCondition()}),t._uU(43),t.qZA(),t.TgZ(44,"button",23),t.NdJ("click",function(){return i.resetForm()}),t._uU(45,"Cancel"),t.qZA()()()()()),2&a&&(t.xp6(6),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",t.lcZ(19,11,i.loadingConditions$)),t.xp6(5),t.Oqu(i.editingCondition?"Edit Condition":"Create New Condition"),t.xp6(2),t.Q6J("formGroup",i.conditionForm),t.xp6(9),t.Q6J("ngIf",t.lcZ(35,13,i.errorMessage$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(37,15,i.isConditionCreated$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(39,17,i.isConditionUpdated$)),t.xp6(4),t.Q6J("disabled",!i.conditionForm.valid),t.xp6(1),t.hij(" ",i.editingCondition?"Update":"Create"," "))},dependencies:[f.O5,u.a8,u.hq,u.dn,u.dk,u.n5,A.Hw,U.Ou,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,y.KE,y.hX,T.oG,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,w.Nt,f.Ov],styles:[".center-text[_ngcontent-%COMP%]{text-align:center}.messages-container[_ngcontent-%COMP%]{margin-top:0}.error-message[_ngcontent-%COMP%], .alert.alert-success[_ngcontent-%COMP%]{margin-bottom:5px}.error-message[_ngcontent-%COMP%]{color:#961b0f;font-weight:700}.alert.alert-success[_ngcontent-%COMP%]{color:#19806f;font-weight:700}.container-tab[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start}.widget-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.section[_ngcontent-%COMP%], .editor-card[_ngcontent-%COMP%]{flex:1;margin:1rem}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:white}.category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.full-width-input[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:#d32f2f;margin-top:20px}.isActive-icon[_ngcontent-%COMP%]{color:green}.isInactive-icon[_ngcontent-%COMP%]{color:red}.item-buttons[_ngcontent-%COMP%]{width:100%;text-align:center;border:0;background-color:transparent}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:medium;margin-bottom:1rem}.item-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:8px}.mat-card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.mat-card-actions[_ngcontent-%COMP%]{margin-top:auto}.mat-card[_ngcontent-%COMP%]{text-align:center}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}mat-card-title[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-weight:500;font-size:1.4rem}mat-form-field[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.section[_ngcontent-%COMP%], .category-editor-card[_ngcontent-%COMP%]{width:calc(100% - 2rem)}}.mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%], .mat-mdc-header-row.mdc-data-table__header-row[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;height:auto;line-height:normal}.myTable[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.myTable[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .myTable[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{white-space:nowrap;width:100%;box-sizing:border-box;background-color:#fff}.myTable[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;height:1.5rem;width:1.5rem;line-height:1.5rem}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.myTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#fff}.small-element[_ngcontent-%COMP%]{height:30px;min-height:30px}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-layout[_ngcontent-%COMP%]{width:auto}.mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{white-space:nowrap}.checkbox-label[_ngcontent-%COMP%]{width:auto;white-space:nowrap}"]})}return n})()}];let yt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#n=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[$.Bz.forChild(ft),$.Bz]})}return n})();var O=c(4664),M=c(6306),Z=c(2096),vt=c(1767);let _t=(()=>{class n{constructor(r,a){this.actions$=r,this.pipePropertiesService=a,this.loadConditions$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(v),(0,O.w)(()=>this.pipePropertiesService.getConditions(null).pipe((0,h.U)(i=>I({conditions:i})),(0,M.K)(i=>(0,Z.of)(S({errorLoadingConditions:i}))))))),this.createCondition$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(_),(0,O.w)(i=>this.pipePropertiesService.createCondition(i.conditionCreate).pipe((0,h.U)(s=>F({condition:s})),(0,M.K)(s=>(0,Z.of)(E({errorCreatingCondition:s}))))))),this.updateCondition$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(x),(0,O.w)(({id:i,condition:s})=>this.pipePropertiesService.updateCondition(i,s).pipe((0,h.U)(()=>Y({id:i,condition:s})),(0,M.K)(g=>(0,Z.of)(k({errorUpdatingCondition:g})))))))}static#t=this.\u0275fac=function(a){return new(a||n)(t.LFG(m.eX),t.LFG(vt.Q))};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})(),xt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#n=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[f.ez,yt,u.QW,A.Ps,U.Cq,l.p0,y.lN,T.p9,p.UX,p.u5,w.c,o.Aw.forFeature("pipeProperty_Condition",V),m.sQ.forFeature([_t])]})}return n})()}}]);